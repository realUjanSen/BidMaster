<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <ti            <div class="col-md-3 mb-3">
                <div class="card text-center bg-dark border-info">
                    <div class="card-body">
                        <i class="bi bi-trophy display-4 text-info"></i>
                        <h3 class="mt-2 text-info">${{ "{:,.0f}".format(bids|max(attribute='bid_amount')|attr('bid_amount')) if bids else 0 }}</h3>
                        <p class="mb-0 text-light">Highest Bid</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card text-center bg-dark border-warning">
                    <div class="card-body">
                        <i class="bi bi-clock display-4 text-warning"></i>
                        <h3 class="mt-2 text-warning">
                            {{ bids|selectattr('bid_time')|selectattr('bid_time', 'greaterthan', (now() - timedelta(hours=24)))|list|length if bids else 0 }}</h3>ment - BidMaster</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-hammer"></i> BidMaster
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="/">
                        <i class="bi bi-house-door"></i> Home
                    </a>
                    <a class="nav-link" href="/auctions">
                        <i class="bi bi-grid-3x3-gap"></i> All Auctions
                    </a>
                    {% if current_user %}
                        <a class="nav-link" href="/my-auctions">
                            <i class="bi bi-person-circle"></i> My Auctions
                        </a>
                        <a class="nav-link" href="/create-auction">
                            <i class="bi bi-plus-circle"></i> Create Auction
                        </a>
                        <a class="nav-link active" href="/bids">
                            <i class="bi bi-clock-history"></i> My Bids
                        </a>
                        <a class="nav-link" href="/admin" style="opacity: 0; pointer-events: all; position: absolute; left: -9999px;">
                            <i class="bi bi-shield-check"></i> Admin
                        </a>
                        <a class="nav-link" href="/balance">
                            <i class="bi bi-wallet2"></i> ${{ "%.2f"|format(current_user.balance) }}
                        </a>
                        <a class="nav-link" href="/logout">
                            <i class="bi bi-box-arrow-in-right"></i> Logout
                        </a>
                    {% else %}
                        <a class="nav-link" href="/login">
                            <i class="bi bi-box-arrow-in-right"></i> Login
                        </a>
                        <a class="nav-link" href="/register">
                            <i class="bi bi-person-plus"></i> Register
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <div class="container my-4">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h1><i class="bi bi-currency-dollar text-primary"></i> Bids Management</h1>
                <p class="text-muted">Monitor all bidding activity across auctions</p>
            </div>
            <div class="col-md-6 text-end">
                <span class="badge bg-success fs-6">Total Bids: {{ bids|length }}</span>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="container mb-4">
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-3">
                        <label class="form-label">Filter by Amount</label>
                        <select class="form-select">
                            <option>All Amounts</option>
                            <option>$0 - $100</option>
                            <option>$100 - $1,000</option>
                            <option>$1,000 - $10,000</option>
                            <option>$10,000+</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Time Period</label>
                        <select class="form-select">
                            <option>All Time</option>
                            <option>Today</option>
                            <option>This Week</option>
                            <option>This Month</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Sort By</label>
                        <select class="form-select">
                            <option>Latest First</option>
                            <option>Highest Amount</option>
                            <option>Lowest Amount</option>
                        </select>
                    </div>
                    <div class="col-md-3 d-flex align-items-end">
                        <button class="btn btn-primary w-100">
                            <i class="bi bi-search"></i> Apply Filters
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bids Table -->
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Recent Bids</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-dark mb-0">
                        <thead class="table-primary">
                            <tr>
                                <th>Bid ID</th>
                                <th>Auction</th>
                                <th>Bidder</th>
                                <th>Amount</th>
                                <th>Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for bid in bids %}
                            <tr>
                                <td><strong>#{{ bid.id }}</strong></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="me-3">
                                            <i class="bi bi-hammer-fill text-warning"></i>
                                        </div>
                                        <div>
                                            <strong>{{ bid.auction_title }}</strong>
                                            <small class="text-muted d-block">ID: {{ bid.auction_id }}</small>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-circle bg-info text-white rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 30px; height: 30px; font-size: 0.8rem;">
                                            {{ bid.bidder_name.split()[0][0] }}{{ bid.bidder_name.split()[-1][0] if bid.bidder_name.split()|length > 1 else '' }}
                                        </div>
                                        <span>{{ bid.bidder_name }}</span>
                                    </div>
                                </td>
                                <td>
                                    <strong class="text-success">${{ "{:,.2f}".format(bid.bid_amount) }}</strong>
                                </td>
                                <td>
                                    <small class="text-muted">
                                        {{ bid.bid_time.strftime('%m/%d/%Y %I:%M %p') if bid.bid_time else 'N/A' }}
                                    </small>
                                </td>
                                <td>
                                    <span class="badge bg-success">Valid</span>
                                </td>
                                <td>
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-sm btn-outline-primary" title="View Details">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-info" title="View Auction">
                                            <i class="bi bi-box-arrow-up-right"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="container my-5">
        <div class="row">
            <div class="col-md-3 mb-3">
                <div class="card text-center bg-primary">
                    <div class="card-body">
                        <i class="bi bi-currency-dollar display-4"></i>
                        <h3 class="mt-2">{{ bids|length }}</h3>
                        <p class="mb-0">Total Bids</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card text-center bg-success">
                    <div class="card-body">
                        <i class="bi bi-graph-up display-4"></i>
                        <h3 class="mt-2">${{ "{:,.0f}".format(bids|sum(attribute='bid_amount')) if bids else 0 }}</h3>
                        <p class="mb-0">Total Value</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card text-center bg-info">
                    <div class="card-body">
                        <i class="bi bi-trophy display-4"></i>
                        <h3 class="mt-2">${{ "{:,.0f}".format(bids|max(attribute='bid_amount')|attr('bid_amount')) if bids else 0 }}</h3>
                        <p class="mb-0">Highest Bid</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card text-center bg-warning">
                    <div class="card-body">
                        <i class="bi bi-clock display-4"></i>
                        <h3 class="mt-2">
                            {{ bids|selectattr('bid_time')|selectattr('bid_time', 'greaterthan', (now() - timedelta(hours=24)))|list|length if bids else 0 }}
                        </h3>
                        <p class="mb-0">Today's Bids</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
